local Players = game:GetService("Players")
local Player = Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")

-- Create GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "PetSpawnerUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = PlayerGui

-- Main UI Frame
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 320, 0, 500)
MainFrame.Position = UDim2.new(0.5, -160, 0.5, -250)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
MainFrame.BorderSizePixel = 0
MainFrame.ClipsDescendants = true
MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui

local Shadow = Instance.new("ImageLabel")
Shadow.Name = "Shadow"
Shadow.Image = "rbxassetid://1316045217"
Shadow.Size = UDim2.new(1, 12, 1, 12)
Shadow.Position = UDim2.new(0, -6, 0, -6)
Shadow.BackgroundTransparency = 1
Shadow.ScaleType = Enum.ScaleType.Slice
Shadow.SliceCenter = Rect.new(10, 10, 118, 118)
Shadow.ZIndex = -1
Shadow.Parent = MainFrame

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 8)
UICorner.Parent = MainFrame

-- Title Bar
local TitleBar = Instance.new("Frame")
TitleBar.Size = UDim2.new(1, 0, 0, 32)
TitleBar.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
TitleBar.BorderSizePixel = 0
TitleBar.Name = "TitleBar"
TitleBar.Parent = MainFrame

local TitleText = Instance.new("TextLabel")
TitleText.Size = UDim2.new(1, -70, 1, 0)
TitleText.Position = UDim2.new(0, 12, 0, 0)
TitleText.BackgroundTransparency = 1
TitleText.Text = "PET SPAWNER PRO"
TitleText.TextColor3 = Color3.fromRGB(220, 220, 255)
TitleText.TextXAlignment = Enum.TextXAlignment.Left
TitleText.Font = Enum.Font.GothamBold
TitleText.TextSize = 14
TitleText.Parent = TitleBar

local ActiveUsers = Instance.new("TextLabel")
ActiveUsers.Size = UDim2.new(0.4, 0, 1, 0)
ActiveUsers.Position = UDim2.new(0.5, 0, 0, 0)
ActiveUsers.BackgroundTransparency = 1
ActiveUsers.Text = "Online: 124.5K"
ActiveUsers.TextColor3 = Color3.fromRGB(120, 255, 120)
ActiveUsers.TextXAlignment = Enum.TextXAlignment.Right
ActiveUsers.Font = Enum.Font.GothamSemibold
ActiveUsers.TextSize = 12
ActiveUsers.Name = "ActiveUsers"
ActiveUsers.Parent = TitleBar

local CloseButton = Instance.new("TextButton")
CloseButton.Size = UDim2.new(0, 32, 0, 32)
CloseButton.Position = UDim2.new(1, -32, 0, 0)
CloseButton.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
CloseButton.BorderSizePixel = 0
CloseButton.Text = "Ã—"
CloseButton.TextColor3 = Color3.fromRGB(255, 100, 100)
CloseButton.Font = Enum.Font.GothamBold
CloseButton.TextSize = 18
CloseButton.Name = "CloseButton"
CloseButton.Parent = TitleBar

-- Buttons Section
local function createButton(name, position, text)
	local button = Instance.new("TextButton")
	button.Name = name
	button.Size = UDim2.new(0.9, 0, 0, 32)
	button.Position = position
	button.BackgroundColor3 = Color3.fromRGB(40, 60, 40)
	button.TextColor3 = Color3.fromRGB(240, 240, 240)
	button.Font = Enum.Font.Gotham
	button.TextSize = 14
	button.Text = text
	button.BorderSizePixel = 0
	button.Parent = MainFrame
	local corner = Instance.new("UICorner")
	corner.CornerRadius = UDim.new(0, 6)
	corner.Parent = button
	return button
end

local spawnPetButton = createButton("SpawnPetButton", UDim2.new(0.05, 0, 0, 50), "Spawn Pet")
local spawnSeedButton = createButton("SpawnSeedButton", UDim2.new(0.05, 0, 0, 90), "Spawn Seed")
local spawnEggButton = createButton("SpawnEggButton", UDim2.new(0.05, 0, 0, 130), "Spawn Egg")

-- Sliders Section (Placeholder Labels)
local weightLabel = Instance.new("TextLabel")
weightLabel.Size = UDim2.new(0.9, 0, 0, 24)
weightLabel.Position = UDim2.new(0.05, 0, 0, 180)
weightLabel.BackgroundTransparency = 1
weightLabel.Text = "Pet Weight: [slider here]"
weightLabel.TextColor3 = Color3.fromRGB(180, 255, 180)
weightLabel.Font = Enum.Font.Gotham
weightLabel.TextSize = 12
weightLabel.Parent = MainFrame

local ageLabel = Instance.new("TextLabel")
ageLabel.Size = UDim2.new(0.9, 0, 0, 24)
ageLabel.Position = UDim2.new(0.05, 0, 0, 210)
ageLabel.BackgroundTransparency = 1
ageLabel.Text = "Pet Age: [slider here]"
ageLabel.TextColor3 = Color3.fromRGB(180, 255, 180)
ageLabel.Font = Enum.Font.Gotham
ageLabel.TextSize = 12
ageLabel.Parent = MainFrame

-- Display Table Placeholder
local tableBox = Instance.new("TextLabel")
tableBox.Size = UDim2.new(0.9, 0, 0, 100)
tableBox.Position = UDim2.new(0.05, 0, 0, 250)
tableBox.BackgroundColor3 = Color3.fromRGB(20, 40, 20)
tableBox.Text = "[Pet Stats Table Placeholder]"
tableBox.TextColor3 = Color3.fromRGB(200, 255, 200)
tableBox.TextWrapped = true
tableBox.Font = Enum.Font.Code
tableBox.TextSize = 12
tableBox.Parent = MainFrame
local corner = Instance.new("UICorner")
corner.Parent = tableBox

-- Close Button Function
CloseButton.MouseButton1Click:Connect(function()
	ScreenGui:Destroy()
end)

-- Update Active Users
coroutine.wrap(function()
	while true do
		local base = 120000
		local fluctuation = math.random(-15000, 20000)
		local count = base + fluctuation
		ActiveUsers.Text = "Online: " .. string.format("%.1f", count/1000) .. "K"
		wait(math.random(10, 20))
	end
end)()

-- Make UI draggable from TitleBar only
local dragging = false
local dragInput, dragStart, startPos

TitleBar.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		dragStart = input.Position
		startPos = MainFrame.Position

		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

TitleBar.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement then
		dragInput = input
	end
end)

UIS.InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		local delta = input.Position - dragStart
		MainFrame.Position = UDim2.new(
			startPos.X.Scale, startPos.X.Offset + delta.X,
			startPos.Y.Scale, startPos.Y.Offset + delta.Y
		)
	end
end)

-- Toggle UI Visibility with RightShift
local isVisible = true
local function ToggleVisibility()
	isVisible = not isVisible
	local goal = {BackgroundTransparency = isVisible and 0 or 1}
	local tweenInfo = TweenInfo.new(0.25, Enum.EasingStyle.Sine, Enum.EasingDirection.Out)

	for _, descendant in pairs(MainFrame:GetDescendants()) do
		if descendant:IsA("GuiObject") then
			local prop = {}
			if descendant:IsA("TextLabel") or descendant:IsA("TextButton") then
				prop.TextTransparency = isVisible and 0 or 1
			end
			if descendant:IsA("ImageLabel") then
				prop.ImageTransparency = isVisible and 0 or 1
			end
			TweenService:Create(descendant, tweenInfo, prop):Play()
		end
	end

	MainFrame.Visible = isVisible
end

UIS.InputBegan:Connect(function(input, gameProcessed)
	if gameProcessed then return end
	if input.KeyCode == Enum.KeyCode.RightShift then
		ToggleVisibility()
	end
end)
